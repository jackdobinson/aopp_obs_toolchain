<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>{{ page.title }}</title>
		<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css">
		
	</head>
	<body>
		{% include top-menu.html %}
		{% include breadcrumb.html %}
	<section id="table-of-contents">
	</section>
	<section id="content">
		<!--
		<pre class="debugging">
			{{ page.content }}
		</pre>
		-->
	
		{{ content }}
	</section>
	<footer>
		default template
	</footer>
	
	<!--<script src='{{ site.basepath }}/assets/js/toc.js' type="module" mimetype></script>-->
	<script type="module">
		import {TableOfContents} from '{{ site.basepath }}/assets/js/toc.js'
		
		window.onload = function() {
			TableOfContents.from_headings_in(
				document.getElementById('content')
			).as_child_of(
				document.getElementById('table-of-contents')
			)
		}
		
		/*
		window.onload = function () {
			console.log('HELLO WORLD')
			const toc_id_str= "toc";
			var list_level = 0;
			var item_level = 1;
			var item_anchor = null
			
			const toc_container = document.getElementById(toc_id_str)
			
			const toc_ul_stack = [toc_container]
			
			create_toc_ul = (toc_ul_stack, level)=>{
				const ul = document.createElement('ul')
				ul.setAttribute('class', `${level} empty`)
				toc_ul_stack.at(-1).appendChild(ul)
				toc_ul_stack.push(ul)
				return toc_ul_stack
			}
			
			previous_toc_ul = (toc_ul_stack)=>{
				toc_ul_stack.pop()
				return toc_ul_stack
			}
			
			create_toc_li = (toc_ul_stack, anchor, text)=>{
				const li = document.createElement('li')
				const a = document.createElement('a')
				a.setAttribute('href', '#'+anchor)
				a.innerHTML=text
				li.appendChild(a)
				const ul_class = toc_ul_stack.at(-1).getAttribute('class')
				toc_ul_stack.at(-1).setAttribute('class', ul_class.replace(' empty', ''))
				toc_ul_stack.at(-1).appendChild(li)
				return toc_ul_stack
			}
			
			for (const item of document.querySelectorAll("h1, h2, h3, h4, h5, h6")){
				item_level = parseInt(item.nodeName[1])
				console.log(item_level)
				
				item_anchor = item.textContent.toLowerCase()
					.replace(' ', '-')
					.replace('/', '-slash-')
				
				//const item_anchor_element = document.createElement('a');
				item.setAttribute('id', item_anchor)
				//item.appendChild(item_anchor_element)
				
				while(list_level < item_level){
					list_level += 1
					create_toc_ul(toc_ul_stack, list_level)
					//toc_html += `<ul class="toc-level-${list_level}">`
				}
			
				while (list_level > item_level){
					list_level -= 1
					previous_toc_ul(toc_ul_stack)
					//toc_html += '<\\ul>'
				}
				create_toc_li(toc_ul_stack, item_anchor, item.textContent)
				
				//toc_html += `<li><a href=#${item_anchor}\>${item.textContent}<\a><\li>`

			}
			
			//toc_html += '<\div>'
			
			//document.getElementById("toc").innerHTML += toc_html;
		};
		*/
	</script>
	</body>
</html>
